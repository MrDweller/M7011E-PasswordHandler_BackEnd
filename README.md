# M7011E-PasswordHandler_BackEnd
A secure password handler, that can store your passwords in a sql database. All passwords will be encrypted and to access them a master password will be used.

This is a schoolproject in the course 'M7011E - Design of Dynamic Web Systems' using the [Django Rest Framework](https://www.django-rest-framework.org/)

A general description for setup and installation is described below. During developement and for running this locally [XAMPP](https://www.apachefriends.org/download.html) has been used and is recommended for easiest setup.

## Prerequisites
- [Python v3.10.2](https://www.python.org/downloads/release/python-3102/)
- [MySQL Database](https://www.mysql.com/)

## Installation

1. In terminal:

   ```
   $ git clone https://github.com/MrDweller/M7011E-PasswordHandler_BackEnd.git
   ```

   ```
   $ cd M7011E-PasswordHandler_BackEnd
   ```
    
2. Acticate virtual enviroments and install dependencies

   ```
   $ python -m venv env
   ```
   
   ```
   $ venv\scripts\activate
   ```
   
   ```
   $ pip install -r requirements.txt
   ```

   ```
   $ touch .env
   ```
   
3. Add this code to your .env file

   Your Django Secret:

   ```
   SECRET_KEY=Required
   ```
   
   Valid settings for Amazon S3 Cloud Storage if you want to import icons and profile pictures accordingly:
  
   ```
   AWS_ACCESS_KEY_ID=Required
   AWS_SECRET_ACCESS_KEY=Required
   AWS_STORAGE_BUCKET_NAME=Required
   AWS_S3_REGION_NAME=Required
   ```
   
   Your Django Secret can be generated by **running these commands:**

   ```
   # importing the function from utils
   from django.core.management.utils import get_random_secret_key

   # generating and printing the SECRET_KEY
   print(get_random_secret_key())
   ```
   
   Since we use SMTP for 2FA you will have to enter a valid email at the bottom in the file `src/backend/settings.py` and enter the corresponding                 **password** for that email in `.env` file under:  
   
   ```
   EMAIL_HOST_PASSWORD=Required
   ```
   **NOTE!**
   
   You may have to generate a google app password and replace is with the `EMAIL_HOST_PASSWORD` in the above step, which can be done by [following these steps](https://support.google.com/accounts/answer/185833?hl=en).

## Database Setup

1. When steps for under Installation is done, in the browser navigate to `localhost/phpmyadmin` and create a database named `password_handler` and import the file `password_handler_database.sql` from the repository.

2. To add an admin and superadmin the database file `password_handler_database.sql` must be edited either via an editor or the dashboard from the browser page `localhost/phpmyadmin`. For the admin table enter a desired username and a valid email. To authorize a superadmin do the same for the superadmin table where the username should correspond to the username from the admins.

## Running

1. Change directory to `password-handler-back-end` and change branch to `master-django`.
2. Activate your virtual enviroment as done in the Installation header in step two. 
3. Change directory to `src` and run the following command:

   ```
   python manage.py runserver 8080   
   ```
4. This completes the steps for setting up and running the back-end part developed with django. To start the front-end follow the steps in this link:
[M7011E-PasswordHandler_FrontEnd](https://github.com/MrDweller/M7011E-PasswordHandler_FrontEnd).
